# Go generate the sha-hash run
# HASH=$(openssl sha256  das2py-${VERSION}.tar.gz | awk '{print $2}')
#
# Example:
#  openssl sha256 das2py-tmp.tar.gz | awk '{print $2}'

{% set name = "das2py" %}
{% set das2c_version = "3.0.2" %}
{% set conda_version = "3.0.2" %}
{% set git_version = "3.0.2" %}
{% set bld_date = "20250206" %}
# This sha-hash is not right, checkout next version of main to get correct one
{% set sha256 = "7b708994e08ce382d45766852ddfa8872526909dcfadecd0fa9deb0db2e4edae" %}

package:
   name: {{ name }} 
   version: {{ conda_version }} 
   
source:
   fn:  das2py-{{ git_version }}.tar.gz
   #url: https://github.com/das-developers/das2py/archive/refs/tags/v{{ git_version }}.tar.gz
   url: https://space.physics.uiowa.edu/~pikerc/das2py-tmp.tar.gz
   sha256: {{ sha256 }}
   
build:
   # This is the zeroth build
   number: 0
   
# The build process for das2py calls python in the make files so we
# need to make sure it uses the anaconda python, not the system version

requirements:
   build:
      - {{ compiler('c') }}
      - setuptools
      - python
      - pip
      - wheel
      - numpy >=1.10.0 
      - das2c =={{ das2c_version }}
      - lxml

   host:
      - python
      - numpy >=1.10.0
      - das2c =={{ das2c_version }}
      - lxml

   run:
      - python
      - setuptools
      - numpy >=1.10.0
      - das2c =={{ das2c_version }}
      - lxml
      
test:
   imports:
      - das2
      - _das2
   source_files:
      - test/TestRead.py
      - test/test_read_empty.d2s
      - test/TestDasTime.py
      - test/TestCatalog.py
      - test/TestSortMinimal.py
      - test/ex08_dynaspec_namespace.d3t
      - test/ex05_waveform_extra.d3t
      - test/ex06_waveform_binary.d3b
      - test/ex08_dynaspec_namespace.d3t
      - test/ex12_sounder_xyz.d3t
      - test/ex13_object_annotation.d3t
      - test/ex14_object_tfcat.d3t
      - test/ex15_vector_frame.d3b
      - test/ex16_mag_grid_doc.d3x
      - test/ex96_yscan_multispec.d2t
   commands:
      - python test/TestRead.py
      - python test/TestDasTime.py
      - python test/TestCatalog.py
      - python test/TestSortMinimal.py
      - das_verify test/ex05_waveform_extra.d3t
      - das_verify test/ex06_waveform_binary.d3b
      - das_verify test/ex08_dynaspec_namespace.d3t
      - das_verify test/ex12_sounder_xyz.d3t
      - das_verify test/ex13_object_annotation.d3t
      - das_verify test/ex14_object_tfcat.d3t
      - das_verify test/ex15_vector_frame.d3b
      - das_verify test/ex16_mag_grid_doc.d3x
      - das_verify test/ex96_yscan_multispec.d2t

about:
   home: https://das2.org/das2py
   license: MIT
   summary: An efficient space physics data client for python
